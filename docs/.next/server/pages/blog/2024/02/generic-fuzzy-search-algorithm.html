<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"/><meta property="og:url" content="https://www.peril.lol/voxa/blog/2024/02/generic-fuzzy-search-algorithm"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@CodeEdit"/><title>Writing a Generic Fuzzy Search Algorithm in Swift | Voxa Blog</title><meta property="og:title" content="Writing a Generic Fuzzy Search Algorithm in Swift | Voxa Blog"/><meta name="description" content="Fuzzy searching finds matches even if there are spelling mistakes or slight variations in the search terms. It helps improve search accuracy by understanding what the user is likely looking for."/><meta property="og:description" content="Fuzzy searching finds matches even if there are spelling mistakes or slight variations in the search terms. It helps improve search accuracy by understanding what the user is likely looking for."/><meta property="og:image" content="https://github.com/activcoding/codeedit.app/assets/806104/e4db5b6a-0214-4cc7-8019-8354f37851aa"/><meta name="twitter:creator" content="@CodeEditApp"/><meta name="next-head-count" content="11"/><meta charSet="utf-8"/><meta name="apple-mobile-web-app-capable" content="yes"/><link rel="icon" href="/favicon.png" type="image/svg+xml"/><link rel="preload" href="/_next/static/css/8fe06d4502fcdc7a.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/8fe06d4502fcdc7a.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-5429a50ba5373c56.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-fdf56fc4602be5bb.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-f82da51b93bf81eb.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/230-3747920c7e2eaeb8.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/386-fe4b299a00ab1083.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-0a34bf6c017bce53.js" defer="" crossorigin=""></script><script src="/_next/static/Xf4DupNDsftRDxAe6Cf7U/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/Xf4DupNDsftRDxAe6Cf7U/_ssgManifest.js" defer="" crossorigin=""></script><style data-styled="" data-styled-version="6.1.1">.bnxivj{font-size:17px;line-height:1.47059;font-weight:600;letter-spacing:-.022em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;color:var(--label-primary-color);}/*!sc*/
.bYhEZu{font-size:14px;line-height:1.42859;font-weight:400;letter-spacing:-.016em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;color:var(--label-secondary-color);}/*!sc*/
data-styled.g1[id="sc-bdfCDU"]{content:"bnxivj,bYhEZu,"}/*!sc*/
.rIokE{margin-left:auto;margin-right:auto;max-width:980px;width:calc(100% - max(22px, env(safe-area-inset-left)) - max(22px, env(safe-area-inset-right)));padding:0 22px;padding-left:calc(max(22px, env(safe-area-inset-left)));padding-right:calc(max(22px, env(safe-area-inset-right)));position:relative;}/*!sc*/
@media only screen and (max-width: 1068px){.rIokE{margin-left:auto;margin-right:auto;width:692px;}}/*!sc*/
@media only screen and (max-width: 767px){.rIokE{max-width:366px;width:calc(100% - 16px * 2);padding:0 16px;padding-left:calc(max(16px, env(safe-area-inset-left)));padding-right:calc(max(16px, env(safe-area-inset-right)));}}/*!sc*/
data-styled.g3[id="sc-dlfmHC"]{content:"rIokE,"}/*!sc*/
.ghYAnK{display:-ms-grid;display:grid;-ms-grid-columns:repeat(4, 1fr);grid-template-columns:repeat(4, 1fr);gap:24px;}/*!sc*/
@media only screen and (max-width: 1068px){.ghYAnK{-ms-grid-columns:repeat(2, 1fr);grid-template-columns:repeat(2, 1fr);}}/*!sc*/
@media only screen and (max-width: 500px){.ghYAnK{-ms-grid-columns:repeat(1, 1fr);grid-template-columns:repeat(1, 1fr);}}/*!sc*/
data-styled.g4[id="sc-hKgKIp"]{content:"ghYAnK,"}/*!sc*/
.hiyZaH{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:8px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}/*!sc*/
.hiyZaH.hiyZaH>hr{-webkit-align-self:stretch;-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch;margin:0;-webkit-flex:0;-ms-flex:0;flex:0;border:0;border-top:1px solid var(--fill-gray-tertiary);height:0;}/*!sc*/
data-styled.g6[id="sc-jSguLX"]{content:"hiyZaH,"}/*!sc*/
.biedDj{cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5em;text-align:center;white-space:nowrap;font-size:17px;line-height:1.17648;font-weight:400;letter-spacing:-.022em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;min-width:28px;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;border-radius:18px;background:var(--color-fill-blue);color:#fff;border:0;outline:0;font-size:12px;line-height:1.33337;font-weight:400;letter-spacing:-.01em;min-width:23px;padding-left:11px;padding-right:11px;padding-top:4px;padding-bottom:4px;border-radius:12px;}/*!sc*/
.biedDj svg{width:1em;height:1em;vertical-align:center;margin:0 -0.25em;}/*!sc*/
data-styled.g7[id="sc-gKsecS"]{content:"biedDj,"}/*!sc*/
.gioWSi{--toggle-border-radius-outer:12px;--toggle-border-radius-inner:10px;--toggle-color-fill:var(--color-button-background-active);--toggle-color-text:var(--color-fill-blue);font-size:12px;line-height:1.33337;font-weight:400;letter-spacing:-.01em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;border:1px solid var(--toggle-color-fill);border-radius:var(--toggle-border-radius-outer, 2px);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:1px;}/*!sc*/
.gioWSi input[type="radio"]{position:absolute;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(0px 0px 99.9% 99.9%);clip-path:inset(0px 0px 99.9% 99.9%);overflow:hidden;height:1px;width:1px;padding:0;border:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}/*!sc*/
data-styled.g8[id="sc-iBPTVF"]{content:"gioWSi,"}/*!sc*/
.kQHsOt{box-sizing:border-box;display:inline-block;padding:1px 6px;min-width:42px;border:1px solid transparent;border-radius:var(--toggle-border-radius-inner, 2px);text-align:center;color:var(--toggle-color-text);}/*!sc*/
input[type="radio"]:checked+.kQHsOt{--toggle-color-text:var(--color-button-text);background:var(--toggle-color-fill);border-color:var(--toggle-color-fill);}/*!sc*/
data-styled.g9[id="sc-fubDmA"]{content:"kQHsOt,"}/*!sc*/
.eJLDch{-ms-grid-row-span:auto;grid-row-end:auto;-ms-grid-column-span:auto;grid-column-end:auto;}/*!sc*/
data-styled.g10[id="sc-pGaPU"]{content:"eJLDch,"}/*!sc*/
.biQoaY{--section-accent-color:var(--azure);}/*!sc*/
.ecOZbo{--section-accent-color:var(--azure);padding-top:64px;padding-bottom:64px;}/*!sc*/
@media only screen and (max-width: 767px){.ecOZbo{padding-top:32px;padding-bottom:32px;}}/*!sc*/
data-styled.g11[id="sc-jrAGKZ"]{content:"biQoaY,ecOZbo,"}/*!sc*/
.kUxmqk{width:48px;height:48px;}/*!sc*/
data-styled.g14[id="sc-crrtmM"]{content:"kUxmqk,"}/*!sc*/
.hAKmwp{width:48px;height:48px;}/*!sc*/
data-styled.g15[id="sc-dQpIV"]{content:"hAKmwp,"}/*!sc*/
.ggvXep{width:48px;height:48px;}/*!sc*/
data-styled.g16[id="sc-bqyKbq"]{content:"ggvXep,"}/*!sc*/
.fOCVA-d{font-size:12px;line-height:1.33337;font-weight:400;letter-spacing:-.01em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;overflow:hidden;position:relative;z-index:1;background-color:var(--background-tertiary-color);color:var(--label-tertiary-color);box-sizing:content-box;}/*!sc*/
.fOCVA-d a{color:var(--glyph-blue);}/*!sc*/
.fOCVA-d a :hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g17[id="sc-kstpWv"]{content:"fOCVA-d,"}/*!sc*/
.gXpcFj{margin:0 auto;max-width:980px;padding:0 22px;padding-left:calc(max(22px, env(safe-area-inset-left)));padding-right:calc(max(22px, env(safe-area-inset-right)));}/*!sc*/
data-styled.g18[id="sc-hBEZvw"]{content:"gXpcFj,"}/*!sc*/
.ecpyiT{color:var(--glyph-gray-tertiary);padding-top:34px;padding-bottom:calc(max(21px, env(safe-area-inset-bottom)));color:#86868b;}/*!sc*/
data-styled.g19[id="sc-fodVRF"]{content:"ecpyiT,"}/*!sc*/
.cBKygQ{margin-bottom:7px;padding-bottom:8px;border-bottom:1px solid #d2d2d7;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-color:var(--separator-color);}/*!sc*/
@media only screen and (max-width: 767px){.cBKygQ{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:5px;}}/*!sc*/
data-styled.g20[id="sc-fFubCH"]{content:"cBKygQ,"}/*!sc*/
.fknOlR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
.fknOlR a{border-right:1px solid #d2d2d7;margin-right:7px;padding-right:10px;display:inline-block;margin-top:5px;white-space:nowrap;color:var(--glyph-gray-secondary-alt);border-color:var(--fill-gray-tertiary);}/*!sc*/
.fknOlR a:last-child{border:0;margin-right:0;padding-right:0;}/*!sc*/
data-styled.g22[id="sc-idOjMB"]{content:"fknOlR,"}/*!sc*/
.fYfJec{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}/*!sc*/
.fYfJec a{color:var(--glyph-gray-secondary-alt);}/*!sc*/
.fYfJec a :hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
@media only screen and (max-width: 767px){.fYfJec{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
data-styled.g24[id="sc-hHftZz"]{content:"fYfJec,"}/*!sc*/
.bybHVS{position:relative;top:0;left:0;width:100%;height:52px;z-index:9997;position:-webkit-sticky;position:sticky;}/*!sc*/
.bybHVS *{box-sizing:content-box;}/*!sc*/
@media only screen and (max-width: 767px){.bybHVS{height:48px;}}/*!sc*/
data-styled.g25[id="sc-dmlpXa"]{content:"bybHVS,"}/*!sc*/
.imFGBO{position:absolute;top:0;left:0;width:100%;height:auto;min-height:100%;z-index:1;-webkit-transition:background-color 0.5s cubic-bezier(0.28, 0.11, 0.32, 1);transition:background-color 0.5s cubic-bezier(0.28, 0.11, 0.32, 1);background-color:var(--material-background-color);-webkit-backdrop-filter:var(--material-filters);backdrop-filter:var(--material-filters);box-shadow:0 1px 0 0 var(--material-separator-color);}/*!sc*/
.menu-open .imFGBO{background-color:var(--thick-material-background-color);}/*!sc*/
data-styled.g26[id="sc-kfzCjt"]{content:"imFGBO,"}/*!sc*/
.gxdAxI{z-index:2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}/*!sc*/
@media only screen and (max-width: 767px){.gxdAxI{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:stretch;-ms-flex-pack:stretch;-webkit-justify-content:stretch;justify-content:stretch;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}/*!sc*/
data-styled.g27[id="sc-fKFygU"]{content:"gxdAxI,"}/*!sc*/
.gaoavq{font-size:22px;line-height:1.14286;font-weight:600;letter-spacing:-0.033em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;cursor:default;display:block;margin:0;padding:0;white-space:nowrap;-webkit-transition:color 0.5s cubic-bezier(0.28, 0.11, 0.32, 1);transition:color 0.5s cubic-bezier(0.28, 0.11, 0.32, 1);color:var(--glyph-gray);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0;}/*!sc*/
@media only screen and (max-width: 767px){.gaoavq{padding:10px 0;font-size:19px;margin-left:0px;}}/*!sc*/
.gaoavq a{display:inline-block;letter-spacing:inherit;line-height:inherit;margin:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;color:var(--glyph-gray);opacity:.92;}/*!sc*/
.gaoavq img{margin-left:-3px;padding-right:10px;cursor:pointer;}/*!sc*/
@media only screen and (max-width: 767px){.gaoavq img{margin-left:-2px;padding-right:8px;width:28px;height:auto;}}/*!sc*/
.gaoavq span{cursor:pointer;}/*!sc*/
data-styled.g28[id="sc-bBXqJn"]{content:"gaoavq,"}/*!sc*/
.bsrZzh{font-size:12px;line-height:1;font-weight:400;letter-spacing:-.01em;font-family:-apple-system,BlinkMacSystemFont,sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;}/*!sc*/
@media only screen and (max-width: 767px){.bsrZzh{width:100%;}}/*!sc*/
data-styled.g29[id="sc-iwyWfK"]{content:"bsrZzh,"}/*!sc*/
.kZXWR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;}/*!sc*/
@media only screen and (max-width: 767px){.kZXWR{float:none;overflow:hidden;pointer-events:none;visibility:hidden;width:100%;padding-top:0;max-height:0;-webkit-transition:max-height 0.5s cubic-bezier(0.28, 0.11, 0.32, 1) 0.4s,visibility 0s linear 1s;transition:max-height 0.5s cubic-bezier(0.28, 0.11, 0.32, 1) 0.4s,visibility 0s linear 1s;}.menu-open .kZXWR{max-height:400px;max-height:calc(100vh - 48px - 48px);overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:auto;visibility:visible;transition-delay:0.2s,0s;}}/*!sc*/
data-styled.g30[id="sc-cxFKTC"]{content:"kZXWR,"}/*!sc*/
@media only screen and (max-width: 767px){.iUpNcZ{width:100%;opacity:0;padding:4px 24px 24px;-webkit-transform:translate3d(0, -150px, 0);-moz-transform:translate3d(0, -150px, 0);-ms-transform:translate3d(0, -150px, 0);transform:translate3d(0, -150px, 0);-webkit-transition:-webkit-transform 1s cubic-bezier(0.23, 1, 0.32, 1) 0.5s,opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1) 0.2s;transition:transform 1s cubic-bezier(0.23, 1, 0.32, 1) 0.5s,opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1) 0.2s;}.menu-open .iUpNcZ{opacity:1;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);transition-delay:0.2s,0.4s;}}/*!sc*/
data-styled.g31[id="sc-lmoLKH"]{content:"iUpNcZ,"}/*!sc*/
.iCdTgV{margin-left:24px;float:left;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:4px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media only screen and (max-width: 767px){.iCdTgV{margin-left:0;display:inline-block;float:none;width:100%;height:44px;transition-delay:0.63s;}.iCdTgV:first-child a{border:0;}.iCdTgV:nth-child(1) a{transition-delay:0.07s;}.iCdTgV:nth-child(2) a{transition-delay:0.14s;}.iCdTgV:nth-child(3) a{transition-delay:0.21s;}.iCdTgV:nth-child(4) a{transition-delay:0.28s;}.iCdTgV:nth-child(5) a{transition-delay:0.35s;}.iCdTgV:nth-child(6) a{transition-delay:0.42s;}.iCdTgV:nth-child(7) a{transition-delay:0.49s;}.iCdTgV:nth-child(8) a{transition-delay:0.56s;}.menu-open .iCdTgV{transition-delay:0s;}.menu-open .iCdTgV:nth-child(1) a{transition-delay:0.56s;}.menu-open .iCdTgV:nth-child(2) a{transition-delay:0.49s;}.menu-open .iCdTgV:nth-child(3) a{transition-delay:0.42s;}.menu-open .iCdTgV:nth-child(4) a{transition-delay:0.35s;}.menu-open .iCdTgV:nth-child(5) a{transition-delay:0.28s;}.menu-open .iCdTgV:nth-child(6) a{transition-delay:0.21s;}.menu-open .iCdTgV:nth-child(7) a{transition-delay:0.14s;}.menu-open .iCdTgV:nth-child(8) a{transition-delay:0.07s;}}/*!sc*/
data-styled.g32[id="sc-iJuWdM"]{content:"iCdTgV,"}/*!sc*/
.hPwVkP{color:var( --foreground-color);display:inline-block;line-height:22px;white-space:nowrap;opacity:0.88;}/*!sc*/
.hPwVkP:hover{color:var(--glyph-blue);}/*!sc*/
@media only screen and (max-width: 767px){.hPwVkP{border-top:1px solid rgba(0,0,0,0.181818);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;line-height:1.3;opacity:0;-webkit-transform:translate3d(0, -25px, 0);-moz-transform:translate3d(0, -25px, 0);-ms-transform:translate3d(0, -25px, 0);transform:translate3d(0, -25px, 0);-webkit-transition:0.5s ease;transition:0.5s ease;transition-property:transform,opacity;width:100%;}[data-color-scheme="dark"] .hPwVkP{border-color:rgba(255,255,255,0.26087);}.menu-open .hPwVkP{opacity:0.92;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);}}/*!sc*/
.jMwhpj{color:var( --foreground-color);display:inline-block;line-height:22px;white-space:nowrap;opacity:0.88;color:var(--foreground-color)!important;opacity:0.56;}/*!sc*/
.jMwhpj:hover{color:var(--glyph-blue);}/*!sc*/
@media only screen and (max-width: 767px){.jMwhpj{border-top:1px solid rgba(0,0,0,0.181818);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;line-height:1.3;opacity:0;-webkit-transform:translate3d(0, -25px, 0);-moz-transform:translate3d(0, -25px, 0);-ms-transform:translate3d(0, -25px, 0);transform:translate3d(0, -25px, 0);-webkit-transition:0.5s ease;transition:0.5s ease;transition-property:transform,opacity;width:100%;border-color:rgba(0,0,0,0.285714);}[data-color-scheme="dark"] .jMwhpj{border-color:rgba(255,255,255,0.26087);}.menu-open .jMwhpj{opacity:0.56;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);}[data-color-scheme="dark"] .jMwhpj{border-color:rgba(255,255,255,0.428571);}}/*!sc*/
data-styled.g33[id="sc-giInvV"]{content:"hPwVkP,jMwhpj,"}/*!sc*/
.bebBqw{opacity:0.5;margin-top:-2px;margin-left:0.25em;}/*!sc*/
data-styled.g34[id="sc-ezrdqu"]{content:"bebBqw,"}/*!sc*/
.cHOZrw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media only screen and (max-width: 767px){.cHOZrw{right:0;padding:9px 16px;position:absolute;top:0;z-index:1;}}/*!sc*/
data-styled.g35[id="sc-bYEuID"]{content:"cHOZrw,"}/*!sc*/
.lomTcf{margin-right:6px;cursor:pointer;display:none;overflow:hidden;width:40px;height:30px;-webkit-tap-highlight-color:transparent;}/*!sc*/
@media only screen and (max-width: 767px){.lomTcf{display:block;}}/*!sc*/
data-styled.g37[id="sc-iktFSN"]{content:"lomTcf,"}/*!sc*/
.cGVUOj{display:block;position:relative;width:100%;height:100%;z-index:1;-webkit-transition:-webkit-transform 1s cubic-bezier(0.86, 0, 0.07, 1),-webkit-transform-origin 1s cubic-bezier(0.86, 0, 0.07, 1);transition:transform 1s cubic-bezier(0.86, 0, 0.07, 1),transform-origin 1s cubic-bezier(0.86, 0, 0.07, 1);-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);opacity:0.8;}/*!sc*/
.menu-open .cGVUOj{-webkit-transform:translateY(-8px);-moz-transform:translateY(-8px);-ms-transform:translateY(-8px);transform:translateY(-8px);}/*!sc*/
.cGVUOj:before,.cGVUOj:after{content:"";display:block;position:absolute;top:18px;width:11px;height:1px;z-index:1;-webkit-transition:-webkit-transform 1s cubic-bezier(0.86, 0, 0.07, 1),-webkit-transform-origin 1s cubic-bezier(0.86, 0, 0.07, 1);transition:transform 1s cubic-bezier(0.86, 0, 0.07, 1),transform-origin 1s cubic-bezier(0.86, 0, 0.07, 1);background:#000;}/*!sc*/
.cGVUOj:before{right:50%;border-radius:0.5px 0 0 0.5px;transform-origin:100% 100%;-webkit-transform:rotate(40deg) scaleY(1.1);-moz-transform:rotate(40deg) scaleY(1.1);-ms-transform:rotate(40deg) scaleY(1.1);transform:rotate(40deg) scaleY(1.1);}/*!sc*/
.menu-open .cGVUOj:before{transform-origin:100% 0%;-webkit-transform:rotate(-40deg) scaleY(1.1);-moz-transform:rotate(-40deg) scaleY(1.1);-ms-transform:rotate(-40deg) scaleY(1.1);transform:rotate(-40deg) scaleY(1.1);}/*!sc*/
.cGVUOj:after{left:50%;border-radius:0 0.5px 0.5px 0;transform-origin:0% 100%;-webkit-transform:rotate(-40deg) scaleY(1.1);-moz-transform:rotate(-40deg) scaleY(1.1);-ms-transform:rotate(-40deg) scaleY(1.1);transform:rotate(-40deg) scaleY(1.1);}/*!sc*/
.menu-open .cGVUOj:after{transform-origin:0% 0%;-webkit-transform:rotate(40deg) scaleY(1.1);-moz-transform:rotate(40deg) scaleY(1.1);-ms-transform:rotate(40deg) scaleY(1.1);transform:rotate(40deg) scaleY(1.1);}/*!sc*/
html[data-color-scheme='dark'] .cGVUOj::before,html[data-color-scheme='dark'] .cGVUOj::after{background:var(--glyph-gray);}/*!sc*/
data-styled.g38[id="sc-jJEJze"]{content:"cGVUOj,"}/*!sc*/
.fXvgAl>*:first-child{margin-top:0;}/*!sc*/
.fXvgAl .centered{text-align:center;}/*!sc*/
.fXvgAl .rounded-corners{border-radius:15px;}/*!sc*/
.fXvgAl>*,.fXvgAl p>*,.fXvgAl figure>*{margin-left:auto;margin-right:auto;max-width:653px;}/*!sc*/
@media only screen and (max-width: 1068px){.fXvgAl>*,.fXvgAl p>*,.fXvgAl figure>*{max-width:576px;}}/*!sc*/
@media only screen and (max-width: 734px){.fXvgAl>*,.fXvgAl p>*,.fXvgAl figure>*{max-width:87.5%;}}/*!sc*/
.fXvgAl>.wide,.fXvgAl p>.wide,.fXvgAl figure>.wide{max-width:100%;}/*!sc*/
.fXvgAl>.full-width,.fXvgAl p>.full-width,.fXvgAl figure>.full-width{width:100vw;max-width:100vw;position:relative;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);}/*!sc*/
.fXvgAl p{font-size:19px;line-height:1.4211;font-weight:400;letter-spacing:0.012em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;margin-bottom:1.4211em;}/*!sc*/
.fXvgAl img,.fXvgAl video,.fXvgAl iframe{display:block;margin-top:44px;margin-bottom:44px;}/*!sc*/
.fXvgAl img.crop-top,.fXvgAl video.crop-top,.fXvgAl iframe.crop-top{object-position:top;}/*!sc*/
.fXvgAl img.crop-right,.fXvgAl video.crop-right,.fXvgAl iframe.crop-right{object-position:right;}/*!sc*/
.fXvgAl img.crop-bottom,.fXvgAl video.crop-bottom,.fXvgAl iframe.crop-bottom{object-position:bottom;}/*!sc*/
.fXvgAl img.crop-left,.fXvgAl video.crop-left,.fXvgAl iframe.crop-left{object-position:left;}/*!sc*/
.fXvgAl img.ratio-1-1,.fXvgAl video.ratio-1-1,.fXvgAl iframe.ratio-1-1{object-fit:cover;aspect-ratio:1/1;}/*!sc*/
.fXvgAl img.ratio-5-4,.fXvgAl video.ratio-5-4,.fXvgAl iframe.ratio-5-4{object-fit:cover;aspect-ratio:5/4;}/*!sc*/
.fXvgAl img.ratio-4-3,.fXvgAl video.ratio-4-3,.fXvgAl iframe.ratio-4-3{object-fit:cover;aspect-ratio:4/3;}/*!sc*/
.fXvgAl img.ratio-7-5,.fXvgAl video.ratio-7-5,.fXvgAl iframe.ratio-7-5{object-fit:cover;aspect-ratio:7/5;}/*!sc*/
.fXvgAl img.ratio-3-2,.fXvgAl video.ratio-3-2,.fXvgAl iframe.ratio-3-2{object-fit:cover;aspect-ratio:3/2;}/*!sc*/
.fXvgAl img.ratio-16-9,.fXvgAl video.ratio-16-9,.fXvgAl iframe.ratio-16-9{object-fit:cover;aspect-ratio:16/9;}/*!sc*/
.fXvgAl img.ratio-2-1,.fXvgAl video.ratio-2-1,.fXvgAl iframe.ratio-2-1{object-fit:cover;aspect-ratio:2/1;}/*!sc*/
.fXvgAl img.ratio-21-9,.fXvgAl video.ratio-21-9,.fXvgAl iframe.ratio-21-9{object-fit:cover;aspect-ratio:21/9;}/*!sc*/
.fXvgAl img.ratio-5-2,.fXvgAl video.ratio-5-2,.fXvgAl iframe.ratio-5-2{object-fit:cover;aspect-ratio:5/2;}/*!sc*/
.fXvgAl img.ratio-3-1,.fXvgAl video.ratio-3-1,.fXvgAl iframe.ratio-3-1{object-fit:cover;aspect-ratio:3/1;}/*!sc*/
.fXvgAl img.ratio-4-5,.fXvgAl video.ratio-4-5,.fXvgAl iframe.ratio-4-5{object-fit:cover;aspect-ratio:4/5;}/*!sc*/
.fXvgAl img.ratio-3-4,.fXvgAl video.ratio-3-4,.fXvgAl iframe.ratio-3-4{object-fit:cover;aspect-ratio:3/4;}/*!sc*/
.fXvgAl img.ratio-5-7,.fXvgAl video.ratio-5-7,.fXvgAl iframe.ratio-5-7{object-fit:cover;aspect-ratio:5/7;}/*!sc*/
.fXvgAl img.ratio-2-3,.fXvgAl video.ratio-2-3,.fXvgAl iframe.ratio-2-3{object-fit:cover;aspect-ratio:2/3;}/*!sc*/
.fXvgAl img.ratio-9-16,.fXvgAl video.ratio-9-16,.fXvgAl iframe.ratio-9-16{object-fit:cover;aspect-ratio:9/16;}/*!sc*/
.fXvgAl img.ratio-1-2,.fXvgAl video.ratio-1-2,.fXvgAl iframe.ratio-1-2{object-fit:cover;aspect-ratio:1/2;}/*!sc*/
.fXvgAl img.ratio-2-5,.fXvgAl video.ratio-2-5,.fXvgAl iframe.ratio-2-5{object-fit:cover;aspect-ratio:2/5;}/*!sc*/
.fXvgAl img.ratio-1-3,.fXvgAl video.ratio-1-3,.fXvgAl iframe.ratio-1-3{object-fit:cover;aspect-ratio:1/3;}/*!sc*/
.fXvgAl *:not(pre):not(.codeblock)>code{background:var(--fill-gray-quaternary);padding:0.2em 0.4em;margin:0;border-radius:0.25em;white-space:break-spaces;font-size:85%;}/*!sc*/
.fXvgAl pre{margin-top:28px;margin-bottom:28px;font-size:15px;line-height:25px;font-weight:400;}/*!sc*/
.fXvgAl pre>code{display:block;color:var(--color-syntax-plain-text);background:var(--color-syntax-background);font-family:'SF Mono',SFMono-Regular,ui-monospace,Menlo,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0px;overflow:auto;border-radius:15px;}/*!sc*/
.fXvgAl pre>.codeblock{border-radius:15px;}/*!sc*/
.fXvgAl p>a:hover,.fXvgAl li>a:hover,.fXvgAl th>a:hover,.fXvgAl td>a:hover,.fXvgAl code>a:hover,.fXvgAl figcaption>a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.fXvgAl table{margin-top:44px;margin-bottom:44px;border-spacing:0;overflow-x:auto;width:100%;}/*!sc*/
.fXvgAl table th,.fXvgAl table td{padding:0.75em 0;border-bottom:1px solid var(--separator-secondary-color);font-size:17px;line-height:25px;}/*!sc*/
.fXvgAl table th{border-bottom:1.5px solid var(--label-tertiary-color);}/*!sc*/
.fXvgAl figure{max-width:100%;margin-top:44px;margin-bottom:44px;}/*!sc*/
.fXvgAl figure img,.fXvgAl figure video,.fXvgAl figure iframe{margin-top:0;margin-bottom:0;}/*!sc*/
.fXvgAl figure figcaption{display:block;max-width:653px;position:relative;color:#6e6e73;margin-top:16px;font-size:12px;line-height:1.33337;font-weight:600;letter-spacing:-0.01em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
@media only screen and (max-width: 1068px){.fXvgAl figure figcaption{max-width:576px;}}/*!sc*/
@media only screen and (max-width: 734px){.fXvgAl figure figcaption{max-width:87.5%;}}/*!sc*/
.fXvgAl h1,.fXvgAl h2,.fXvgAl h3,.fXvgAl h4,.fXvgAl h5,.fXvgAl h6{margin-top:1.25em;margin-bottom:20px;line-height:1.125;}/*!sc*/
.fXvgAl hr{margin-top:44px;margin-bottom:44px;display:block;border:0;border-top:1px solid var(--separator-color);}/*!sc*/
.fXvgAl h1{font-size:48px;}/*!sc*/
.fXvgAl h2{font-size:32px;}/*!sc*/
.fXvgAl h3{font-size:24px;}/*!sc*/
.fXvgAl h4{font-size:19px;}/*!sc*/
.fXvgAl ul,.fXvgAl ol{padding-left:2em;box-sizing:border-box;font-size:19px;margin-bottom:1.4211em;}/*!sc*/
.fXvgAl ul li,.fXvgAl ol li{margin-top:0.5em;}/*!sc*/
.fXvgAl ul li>ul,.fXvgAl ol li>ul,.fXvgAl ul li>ol,.fXvgAl ol li>ol{margin-bottom:0;}/*!sc*/
.fXvgAl blockquote:not(.alert){box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;position:relative;}/*!sc*/
.fXvgAl blockquote:not(.alert):not(.wide):not(.full-width){padding-left:calc(1em + 4px);font-size:19px;line-height:1.4211;font-weight:400;letter-spacing:0.012em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;margin-bottom:1.4211em;color:var(--label-tertiary-color);}/*!sc*/
.fXvgAl blockquote:not(.alert):not(.wide):not(.full-width):before{content:'';display:block;position:absolute;left:0;top:0.125em;bottom:0.125em;border-left:4px solid var(--separator-color);}/*!sc*/
.fXvgAl blockquote:not(.alert) p{margin-bottom:0.7895em;}/*!sc*/
.fXvgAl blockquote:not(.alert) footer{font-size:14px;line-height:1.28577;font-weight:600;letter-spacing:-0.016em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
.fXvgAl blockquote:not(.alert).wide,.fXvgAl blockquote:not(.alert).full-width{margin-top:72px;margin-bottom:72px;}/*!sc*/
@media only screen and (max-width: 1068px){.fXvgAl blockquote:not(.alert).wide,.fXvgAl blockquote:not(.alert).full-width{padding:1em;}}/*!sc*/
.fXvgAl blockquote:not(.alert).wide,.fXvgAl blockquote:not(.alert).full-width,.fXvgAl blockquote:not(.alert).wide p,.fXvgAl blockquote:not(.alert).full-width p{text-align:center;text-wrap:balance;font-size:40px;line-height:1.1;font-weight:700;letter-spacing:0em;}/*!sc*/
@media only screen and (max-width: 1068px){.fXvgAl blockquote:not(.alert).wide,.fXvgAl blockquote:not(.alert).full-width,.fXvgAl blockquote:not(.alert).wide p,.fXvgAl blockquote:not(.alert).full-width p{font-size:36px;}}/*!sc*/
@media only screen and (max-width: 734px){.fXvgAl blockquote:not(.alert).wide,.fXvgAl blockquote:not(.alert).full-width,.fXvgAl blockquote:not(.alert).wide p,.fXvgAl blockquote:not(.alert).full-width p{font-size:27px;}}/*!sc*/
.fXvgAl blockquote:not(.alert).wide:not(:has(p)):before,.fXvgAl blockquote:not(.alert).full-width:not(:has(p)):before,.fXvgAl blockquote:not(.alert).wide:not(:has(p)):after,.fXvgAl blockquote:not(.alert).full-width:not(:has(p)):after,.fXvgAl blockquote:not(.alert).wide p:first-child:before,.fXvgAl blockquote:not(.alert).full-width p:first-child:before,.fXvgAl blockquote:not(.alert).wide p:last-of-type:after,.fXvgAl blockquote:not(.alert).full-width p:last-of-type:after{display:inline-block;width:2em;}/*!sc*/
.fXvgAl blockquote:not(.alert).wide:not(:has(p)):before,.fXvgAl blockquote:not(.alert).full-width:not(:has(p)):before,.fXvgAl blockquote:not(.alert).wide p:first-child:before,.fXvgAl blockquote:not(.alert).full-width p:first-child:before{margin-left:-2em;text-align:right;content:'“';}/*!sc*/
.fXvgAl blockquote:not(.alert).wide:not(:has(p)):after,.fXvgAl blockquote:not(.alert).full-width:not(:has(p)):after,.fXvgAl blockquote:not(.alert).wide p:last-of-type:after,.fXvgAl blockquote:not(.alert).full-width p:last-of-type:after{margin-right:-2em;text-align:left;content:'”';}/*!sc*/
.fXvgAl blockquote:not(.alert).full-width{padding:2em;background:var(--background-secondary-color);box-sizing:border-box;}/*!sc*/
.fXvgAl blockquote.alert{width:656px;max-width:100%;margin:28px auto;break-inside:avoid;border-radius:var(--aside-border-radius, 15px);border-style:var(--aside-border-style, solid);border-width:var(--aside-border-width, 1px 1px 1px 1px);padding:0.9411764706rem;box-sizing:border-box;text-align:start;}/*!sc*/
.fXvgAl blockquote.alert p{margin-top:0.4em;margin-bottom:0;width:auto;}/*!sc*/
.fXvgAl blockquote.alert p:first-child{margin:0;}/*!sc*/
.fXvgAl blockquote.alert p.alert-label{font-size:1rem;line-height:1.5294417647;font-weight:600;letter-spacing:-0.021em;margin-top:-0.25em;}/*!sc*/
.fXvgAl blockquote.alert.note{background-color:var(--color-alert-note-background);border-color:var(--color-alert-note-border);box-shadow:0 0 1px 0 var(--color-alert-note-border) inset,0 0 1px 0 var(--color-alert-note-border);}/*!sc*/
.fXvgAl blockquote.alert.note p.alert-label{color:var(--color-alert-note);}/*!sc*/
.fXvgAl blockquote.alert.tip{background-color:var(--color-alert-tip-background);border-color:var(--color-alert-tip-border);box-shadow:0 0 1px 0 var(--color-alert-tip-border) inset,0 0 1px 0 var(--color-alert-tip-border);}/*!sc*/
.fXvgAl blockquote.alert.tip p.alert-label{color:var(--color-alert-tip);}/*!sc*/
.fXvgAl blockquote.alert.important{background-color:var(--color-alert-important-background);border-color:var(--color-alert-important-border);box-shadow:0 0 1px 0 var(--color-alert-important-border) inset,0 0 1px 0 var(--color-alert-important-border);}/*!sc*/
.fXvgAl blockquote.alert.important p.alert-label{color:var(--color-alert-important);}/*!sc*/
.fXvgAl blockquote.alert.warning{background-color:var(--color-alert-warning-background);border-color:var(--color-alert-warning-border);box-shadow:0 0 1px 0 var(--color-alert-warning-border) inset,0 0 1px 0 var(--color-alert-warning-border);}/*!sc*/
.fXvgAl blockquote.alert.warning p.alert-label{color:var(--color-alert-warning);}/*!sc*/
.fXvgAl blockquote.alert.caution{background-color:var(--color-alert-caution-background);border-color:var(--color-alert-caution-border);box-shadow:0 0 1px 0 var(--color-alert-caution-border) inset,0 0 1px 0 var(--color-alert-caution-border);}/*!sc*/
.fXvgAl blockquote.alert.caution p.alert-label{color:var(--color-alert-caution);}/*!sc*/
.fXvgAl iframe[src^="https://www.youtube.com/"]{display:block;width:100%;height:auto;aspect-ratio:16/9;}/*!sc*/
.fXvgAl section.footnotes ol{padding-left:1.5em;}/*!sc*/
.fXvgAl section.footnotes ol li::marker,.fXvgAl section.footnotes ol li p{font-size:0.7895em;width:auto;margin:0;}/*!sc*/
@media only screen and (max-width: 1068px){.fXvgAl{font-size:17px;line-height:1.47059;font-weight:400;letter-spacing:-0.022em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}}/*!sc*/
@media only screen and (max-width: 1068px){.sc-hiSaRn,.fXvgAl p,.fXvgAl li,.fXvgAl th,.fXvgAl td,.fXvgAl blockquote:not(.wide):not(.full-width){font-size:17px;line-height:1.47059;font-weight:400;letter-spacing:-0.022em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}.fXvgAl th,.fXvgAl td{font-size:15px;}.fXvgAl pre{font-size:13px;}}/*!sc*/
data-styled.g39[id="sc-hiSaRn"]{content:"fXvgAl,"}/*!sc*/
.iUfFkf.component{margin-top:32px;margin-bottom:40px;}/*!sc*/
.iUfFkf button{background:none;border:0;box-sizing:content-box;color:inherit;cursor:pointer;font:inherit;line-height:inherit;overflow:visible;vertical-align:inherit;}/*!sc*/
.iUfFkf .sharesheet-options{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;height:71px;}/*!sc*/
.iUfFkf .sharesheet-options,.iUfFkf .headersplitview .sharesheet-options{height:42px;overflow:visible;}/*!sc*/
.iUfFkf .social-option{position:relative;z-index:2;list-style:none;opacity:1;display:block;opacity:0.5;-webkit-transition:opacity 0.3s cubic-bezier(0.4, 0, 0.25, 1) 0ms;transition:opacity 0.3s cubic-bezier(0.4, 0, 0.25, 1) 0ms;}/*!sc*/
.iUfFkf .social-option:hover{opacity:1;}/*!sc*/
.iUfFkf .sharesheet-options .social-option{margin-top:12px;}/*!sc*/
.iUfFkf .social-option:first-child .social-icon{margin-left:-8px;}/*!sc*/
.iUfFkf .social-option .social-icon{font-size:24px;line-height:24px;width:24px;height:24px;padding:6px;margin-top:-6px;margin-bottom:-6px;}/*!sc*/
.iUfFkf .social-option .social-icon svg{width:18px;height:18px;}/*!sc*/
.iUfFkf .social-option:first-child .social-icon{margin-left:-8px;}/*!sc*/
.iUfFkf .sharesheet-options .social-option:first-child .social-icon{margin-left:-8px;}/*!sc*/
.iUfFkf .sharesheet-options-open,.iUfFkf .sharesheet-options-close{line-height:1em;padding:0;}/*!sc*/
.iUfFkf .sharesheet-options-close,.iUfFkf .sharesheet-options-open{display:none;}/*!sc*/
.iUfFkf .sharesheet-link-container{display:inline-block;vertical-align:middle;margin:0;overflow:hidden;}/*!sc*/
.iUfFkf .sharesheet-link-container{position:absolute;left:0;width:100%;height:1px;opacity:0.01;background-color:#f5f5f7;white-space:normal;text-align:left;top:100%;z-index:-1;}/*!sc*/
data-styled.g40[id="sc-gWHiUp"]{content:"iUfFkf,"}/*!sc*/
.hdGPpx .category.component{margin-top:0;margin-bottom:20px;}/*!sc*/
.hdGPpx .category-eyebrow__category{text-transform:uppercase;}/*!sc*/
.hdGPpx .category-eyebrow__category,.hdGPpx .category-eyebrow__date{display:block;}/*!sc*/
.hdGPpx .category-eyebrow{font-size:12px;line-height:1.33337;font-weight:700;letter-spacing:-0.01em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
.hdGPpx .category-eyebrow__date{margin-top:4px;}/*!sc*/
.hdGPpx .category-eyebrow__date{font-size:14px;line-height:1.28577;font-weight:600;letter-spacing:-0.016em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
.hdGPpx .pagetitle.component{margin-top:0;margin-bottom:0;}/*!sc*/
.hdGPpx .pagetitle .hero-headline{font-size:48px;line-height:1.08349;font-weight:700;letter-spacing:-0.003em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
@media only screen and (max-width: 1068px){.hdGPpx .pagetitle .hero-headline{font-size:40px;line-height:1.1;letter-spacing:0em;}}/*!sc*/
@media only screen and (max-width: 734px){.hdGPpx .pagetitle .hero-headline{font-size:32px;line-height:1.125;letter-spacing:0.004em;}}/*!sc*/
.hdGPpx .article-subhead.component{font-size:24px;line-height:1.16667;font-weight:500;letter-spacing:0.009em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;margin-top:20px;margin-bottom:0;}/*!sc*/
@media only screen and (max-width: 1068px){.hdGPpx .article-subhead.component{font-size:21px;line-height:1.19048;letter-spacing:.011em;}}/*!sc*/
.hdGPpx .author.component{margin-top:20px;margin-bottom:0;}/*!sc*/
.hdGPpx .author-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:5px;}/*!sc*/
.hdGPpx .author-image{width:24px;height:24px;border-radius:50%;}/*!sc*/
.hdGPpx .author-text{font-size:14px;line-height:1.28577;font-weight:600;letter-spacing:-0.016em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;}/*!sc*/
@media only screen and (max-width: 734px){.hdGPpx{margin-left:auto;margin-right:auto;width:87.5%;}}/*!sc*/
data-styled.g41[id="sc-cBNeRQ"]{content:"hdGPpx,"}/*!sc*/
.jSpQYJ .component-content{border-top:1px solid var(--separator-color);padding-top:52px;}/*!sc*/
.jSpQYJ .component-content .author-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:1.1579em;margin-top:1.4211em;}/*!sc*/
.jSpQYJ .component-content img.author-image{width:96px;height:96px;border-radius:50%;}/*!sc*/
.jSpQYJ .component-content .author-info{font-size:14px;line-height:1.42859;font-weight:500;letter-spacing:-0.016em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;box-sizing:border-box;word-wrap:break-word;display:inline-block;vertical-align:top;}/*!sc*/
.jSpQYJ .component-content .author-info-title{font-size:19px;line-height:1.21053;font-weight:700;letter-spacing:0.012em;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Icons','Helvetica Neue','Helvetica','Arial',sans-serif;margin-bottom:3px;}/*!sc*/
.jSpQYJ .component-content .author-info-name{margin-bottom:3px;}/*!sc*/
.jSpQYJ .component-content .author-info-location{margin-top:-2px;margin-bottom:3px;opacity:0.65;}/*!sc*/
.jSpQYJ .component-content .author-info-bio{margin-bottom:3px;}/*!sc*/
.jSpQYJ .component-content .author-social{margin-top:12px;}/*!sc*/
.jSpQYJ .component-content .author-social .author-social-link{margin-right:16px;}/*!sc*/
.jSpQYJ .component-content .author-social .author-social-link svg{width:16px;height:16px;}/*!sc*/
@media only screen and (max-width: 734px){.jSpQYJ{margin-left:auto;margin-right:auto;width:87.5%;}}/*!sc*/
data-styled.g42[id="sc-citwID"]{content:"jSpQYJ,"}/*!sc*/
.dzzlQG{overflow:hidden;padding:64px 0;}/*!sc*/
.dzzlQG .component{margin-left:auto;margin-right:auto;max-width:980px;}/*!sc*/
.dzzlQG .component-content{margin-left:auto;margin-right:auto;max-width:653px;}/*!sc*/
@media only screen and (max-width: 1068px){.dzzlQG .component-content{max-width:576px;}}/*!sc*/
@media only screen and (max-width: 734px){.dzzlQG .pagebody+.sharesheet,.dzzlQG .about-author,.dzzlQG .article-header{margin-left:auto;margin-right:auto;width:87.5%;}}/*!sc*/
data-styled.g43[id="sc-jcVcfa"]{content:"dzzlQG,"}/*!sc*/
</style></head><body><div id="__next"><nav role="navigation" class="sc-dmlpXa bybHVS"><div class="sc-kfzCjt imFGBO"><div class="sc-dlfmHC sc-fKFygU rIokE gxdAxI"><a href="/"><h2 class="sc-bBXqJn gaoavq"><img alt="CodeEdit product icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2Fproduct-icon.png&amp;w=32&amp;q=75 1x, /_next/image?url=%2Fproduct-icon.png&amp;w=64&amp;q=75 2x" src="/_next/image?url=%2Fproduct-icon.png&amp;w=64&amp;q=75"/><span>Voxa</span></h2></a><div class="sc-iwyWfK bsrZzh"><div class="sc-cxFKTC kZXWR"><ul class="sc-lmoLKH iUpNcZ"><li class="sc-iJuWdM iCdTgV"><a class="sc-giInvV hPwVkP" href="/">Overview</a></li><li class="sc-iJuWdM iCdTgV"><a class="sc-giInvV hPwVkP" href="/whats-new">What&#x27;s New</a></li><li class="sc-iJuWdM iCdTgV"><a class="sc-giInvV jMwhpj" href="/blog">Blog</a></li><li target="_blank" class="sc-iJuWdM iCdTgV"><a class="sc-giInvV hPwVkP" href="https://github.com/plyght/Voxa">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-ezrdqu bebBqw"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></div><div class="sc-bYEuID cHOZrw"><div class="sc-kLgoAE daGizr"><div class="sc-iktFSN lomTcf"><span class="sc-jJEJze cGVUOj codeeditnav-menucta-chevron"></span></div></div><div class="sc-kLgoAE daGizr"><a class="sc-gKsecS biedDj">Download</a></div></div></div></div></div></nav><main><section class="sc-jrAGKZ biQoaY"><div class="sc-kEjbdu gDvRjX"><article class="sc-jcVcfa dzzlQG"><div class="sc-cBNeRQ hdGPpx article-header"><div class="category component"><div class="component-content"><div class="category-eyebrow"><span class="category-eyebrow__category">Insights</span><span class="category-eyebrow__date">February 17, 2024</span></div></div></div><div class="pagetitle component"><div class="component-content"><h1 class="hero-headline">Writing a Generic Fuzzy Search Algorithm in Swift</h1></div></div><div class="article-subhead component"><div class="component-content">Fuzzy searching finds matches even if there are spelling mistakes or slight variations in the search terms. It helps improve search accuracy by understanding what the user is likely looking for.</div></div><div class="author component"><div class="component-content"><div class="author-content"><img alt="Tom Ludwig user image" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="author-image" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=32&amp;q=75 1x, /_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=48&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=48&amp;q=75"/><span class="author-text">Tom Ludwig</span></div></div></div><div class="sc-gWHiUp iUfFkf sharesheet component"><div class="component-content"><div class="sharesheet-content tooltip-wrapper"><ul class="sharesheet-options"><li class="social-option"><button class="icon icon-facebook social-icon" title="Share via Facebook" aria-label="Share this article via Facebook (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .956C5.903.956.96 5.9.96 11.996c0 5.178 3.564 9.523 8.373 10.716V15.37H7.056v-3.374h2.277v-1.453c0-3.758 1.7-5.5 5.39-5.5.7 0 1.906.137 2.4.274v3.059l-.23-.018a19.006 19.006 0 0 0-1.046-.023c-1.81 0-2.51.685-2.51 2.468v1.193h3.607l-.62 3.374h-2.986v7.586c5.466-.66 9.702-5.315 9.702-10.96C23.04 5.9 18.097.956 12 .956"></path></svg></button></li><li class="social-option"><button class="icon icon-twitter social-icon" title="Share via Twitter" aria-label="Share this article via Twitter (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M18.962 1h3.678l-8.077 9.336L24 23h-7.406l-5.798-7.696L4.16 23H.479l8.558-9.985L0 1h7.59l5.238 7.03zm-1.083 20H20L6.279 3H4z"></path></svg></button></li><li class="social-option"><button class="icon icon-mail social-icon" title="Share via mail" aria-label="Share this article via Mail (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></button></li><li class="social-option"><button class="icon icon-link social-icon" title="Share via link" aria-label="Share via link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></button></li></ul><div class="sharesheet-link-container" aria-hidden="true"><div class="sharesheet-link-content"><input class="link-text" tabindex="-1" readonly="" aria-hidden="true" disabled="" value=""/><button class="icon icon-close sharesheet-link-close" title="close" aria-label="close link" tabindex="-1" aria-hidden="true" role="button"></button></div></div></div></div></div></div><div><div class="sc-hiSaRn fXvgAl pagebody component"><img class="full-width ratio-21-9" alt="Search Field" src="https://github.com/activcoding/codeedit.app/assets/806104/e4db5b6a-0214-4cc7-8019-8354f37851aa"/>
<h2>What is fuzzy search?</h2>
<p>A fuzzy search algorithm is designed to find approximate matches for a given search query, rather than requiring an exact match. It takes into account the similarity between the search query and the data being searched, assigning scores to each potential match based on their resemblance. This allows the algorithm to return relevant results even when there are minor discrepancies or typos in the search input.</p>
<p>Let&#x27;s say you have a list of products, and a user is looking for a &quot;Cozy Sweater.&quot; With a fuzzy search algorithm: If they type &quot;Czy Swetr,&quot; the fuzzy search considers the similarity and still returns the &quot;Cozy Sweater.&quot;</p>
<h2>Different Algorithms</h2>
<p>There are many algorithms out there providing fuzzy search capabilities, some of which you may have encountered.
These include the well-known <strong>Levenshtein Distance</strong>, the <strong>Jaro-Winkler</strong> Distance, <strong>N-Gram</strong> and the <strong>Hamming
Distance</strong> Algorithm. Additionally, for those in pursuit of speed, two notable options are the <strong>BK Tree</strong> and <strong>Bitmap
Algorithm</strong>. It&#x27;s worth noting that the most efficient and fastest fuzzy search algorithms often include keeping an
index of the data, most likely in the form of a trie.</p>
<p>In our example, we use an algorithm that emphasises matching prefixes and will provide a similarity score. The algorithm is fairly fast and easy to understand.</p>
<h2>Putting search algorithms into practice</h2>
<p>Let&#x27;s start by setting everything up.</p>
<p>Go ahead and create a file called <code>Models</code>. As the name implies, this is where we define our data models.
The first one represents a search result:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">struct</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">let</span><span> weight</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Int</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">let</span><span> matchedParts</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">NSRange</span><span class="token token" style="color:#000000">]</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>The <code>weight</code> is something like a score - the higher, the better.
And the <code>matchedParts</code> are the ranges of the string that match the search query. Note that we are using an array of ranges not just one range, because there can be a few characters in between the matched characters. Here is an illustration:</p>
<figure>
  <img class="rounded-corners" src="https://github.com/activcoding/codeedit.app/assets/806104/6e1ee7d3-4c63-4c15-9f45-15cbe0933708"/>
  <figcaption>Search results: &#x27;conviw&#x27; query returns ContentView with the highest relevance.</figcaption>
</figure>
<p>Secondly we need to make sure that the data we searching within is case- and accent-insensitive. This is commonly referred to as &#x27;normalising the string&#x27;. To achieve this, we need to add two structs:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">struct</span><span> </span><span class="token token class-name">FuzzySearchCharacter</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">let</span><span> content</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">let</span><span> normalisedContent</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>And</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">struct</span><span> </span><span class="token token class-name">FuzzySearchString</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> characters</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">FuzzySearchCharacter</span><span class="token token" style="color:#000000">]</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>The first one represents one character, the <code>content</code> field holds the original character, while <code>normalisedContent</code> steps in as its case- and accent-insensitive counterpart.</p>
<p>And the FuzzySearchString represents a whole word, essentially an array of characters. Here is a representation of the frensh word summer: &quot;été&quot;:</p>
<figure>
  <img class="rounded-corners" src="https://github.com/activcoding/codeedit.app/assets/806104/4fecb94f-f2b5-4a83-948a-84f12feddafc"/>
  <figcaption>Representation of the word &#x27;été&#x27; with normalized characters</figcaption>
</figure>
<h2>Normalise Words</h2>
<p>In order to normalise words, we can create an extension for Strings. Create a new file called: <code>String+Normalise.swift</code>. This naming convention enables others to quickly understand the purpose of the file.</p>
<p>Within the file, you&#x27;ll need to create an extension for String to use the functionality later.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">normalise</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">FuzzySearchCharacter</span><span class="token token" style="color:#000000">]</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">lowercased</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">.</span><span>map </span><span class="token token" style="color:#000000">{</span><span> char </span><span class="token token" style="color:#ad3da4">in</span><span>
</span><span>	    </span><span class="token token" style="color:#ad3da4">guard</span><span> </span><span class="token token" style="color:#ad3da4">let</span><span> data </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">(</span><span>char</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">data</span><span class="token token" style="color:#000000">(</span><span>using</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">.</span><span>ascii</span><span class="token token" style="color:#000000">,</span><span> allowLossyConversion</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#ad3da4">true</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">,</span><span> </span><span class="token token" style="color:#ad3da4">let</span><span> normalisedCharacter </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">(</span><span>data</span><span class="token token" style="color:#000000">:</span><span> data</span><span class="token token" style="color:#000000">,</span><span> encoding</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">.</span><span>ascii</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#ad3da4">else</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>	        </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token class-name">FuzzySearchCharacter</span><span class="token token" style="color:#000000">(</span><span>content</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">(</span><span>char</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">,</span><span> normalisedContent</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">(</span><span>char</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">)</span><span>
</span><span>            </span><span class="token token" style="color:#000000">}</span><span>
</span>
<span>	    </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token class-name">FuzzySearchCharacter</span><span class="token token" style="color:#000000">(</span><span>content</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">(</span><span>char</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">,</span><span> normalisedContent</span><span class="token token" style="color:#000000">:</span><span> normalisedCharacter</span><span class="token token" style="color:#000000">)</span><span>
</span><span>    	</span><span class="token token" style="color:#000000">}</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>In this function, the String it&#x27;s called on, is first converted to lowercase. Then, it will convert it to data using the ascii encoding and allow lossy conversion, which means that we lose data. Through losing data, we make the String accent-insensitive.
The function then returns an array of <code>FuzzySearchCharacter</code> objects, representing the original and normalised content for each character.</p>
<h3>Matching Prefix</h3>
<p>Now we need to find out if the search query and the string we&#x27;re comparing it against match. To achieve this, we can write another extension: <code>hasPrefix</code>. For better understanding, let&#x27;s look at the illustration:</p>
<figure>
  <img class="rounded-corners" src="https://github.com/activcoding/codeedit.app/assets/806104/f96a4e4f-8821-4989-a744-266cc47b8e8e"/>
  <figcaption>Depicts iterations checking prefixes for a match.</figcaption>
</figure>
<p>The function simply checks for matching characters from a specified starting index. This functionality will prove useful in later.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">hasPrefix</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchCharacter</span><span class="token token" style="color:#000000">,</span><span> startingAt index</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Int</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">Int</span><span class="token token" style="color:#000000">?</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">guard</span><span> </span><span class="token token" style="color:#ad3da4">let</span><span> stringIndex </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">index</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span>startIndex</span><span class="token token" style="color:#000000">,</span><span> offsetBy</span><span class="token token" style="color:#000000">:</span><span> index</span><span class="token token" style="color:#000000">,</span><span> limitedBy</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span>endIndex</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#ad3da4">else</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token nil" style="color:#703daa">nil</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">let</span><span> searchString </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">sufflix</span><span class="token token" style="color:#000000">(</span><span>from</span><span class="token token" style="color:#000000">:</span><span> stringIndex</span><span class="token token" style="color:#000000">)</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">for</span><span> </span><span class="token token" style="color:#ad3da4">prefix</span><span> </span><span class="token token" style="color:#ad3da4">in</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">.</span><span>content</span><span class="token token" style="color:#000000">,</span><span> </span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">.</span><span>normalisedContent</span><span class="token token" style="color:#000000">]</span><span> </span><span class="token token" style="color:#ad3da4">where</span><span> searchString</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">hasPrefix</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">.</span><span>count
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token nil" style="color:#703daa">nil</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>Let&#x27;s go through the code step by step:</p>
<ol>
<li>We accept a prefix that is of type <code>FuzzySearchCharacter</code>, this is the data against which we test our search
query. And we need a starting index.</li>
<li>Verify if the provided index is valid for the search query.</li>
<li>Clip the search query (<code>self</code>) to start from the provided starting index.</li>
<li>Iterate through the provided data and check if the prefixes are matching.</li>
<li>If no match is found, return <code>nil</code>.</li>
</ol>
<p>If this function doesn&#x27;t seem clear at the moment, it will become clearer as we use it.</p>
<h3>Fuzzy Searchable Protocol</h3>
<p>In order to make the Fuzzy Search generic, i.e. make it applicable to every data type, we have to write a protocol.
Other data types can adopt this protocol, enabling them to become fuzzy searchable.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">protocol</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> searchableString</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span> </span><span class="token token" style="color:#ad3da4">get</span><span> </span><span class="token token" style="color:#000000">}</span><span>
</span>
<span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">,</span><span> characters</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchString</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>If a data type wants to conform to <code>FuzzySearchable</code>, it only needs to add three simple lines. For instance, consider this Model:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">struct</span><span> </span><span class="token token class-name">Books</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> title</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> releaseDate</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Date</span><span>
</span>
<span>    </span><span class="token token" style="color:#ad3da4">var</span><span> searchableString</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span>        title
<span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>This approach enables us to use whatever is provided as the searchable string for comparison against the search query.
At this point, you might be wondering why the <code>fuzzyMatch</code> function is not implemented in the example <code>Books</code> struct.
However, we can address this by writing an extension on <code>FuzzySearchable</code> that offers a default <code>fuzzyMatch</code> function for all data types that adapt to it. This is relatively straightforward compared to other implementations:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">,</span><span> characters</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchString</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#000000">[</span><span class="token token" style="color:#000000">...</span><span class="token token" style="color:#000000">]</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>This function takes the query, i.e., the search term, and the characters of a word as arguments. The characters represent the string that we compare the search query against. We use <code>FuzzySearchString</code> instead of a simple String, because we want a case- and accent-insensitive search.</p>
<p>The function then returns a <code>FuzzySearchMatchResult</code>, which just holds information about the search result, to be precise it includes <code>let weight: Int</code> and <code>let matchedParts: [NSRange]</code>.</p>
<p>Now let&#x27;s implement the function:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">,</span><span> characters</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchString</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">let</span><span> compareString </span><span class="token token" style="color:#000000">=</span><span> characters</span><span class="token token" style="color:#000000">.</span><span>characters </span><span class="token token" style="color:#707f8c">// the string we compare against</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">let</span><span> searchString </span><span class="token token" style="color:#000000">=</span><span> query</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">lowercased</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#707f8c">// make the query case-insensitive</span><span>
</span>
<span>        </span><span class="token token" style="color:#ad3da4">var</span><span> totalScore </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span> </span><span class="token token" style="color:#707f8c">// represents the weight of the match</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">var</span><span> matchedParts </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">NSRange</span><span class="token token" style="color:#000000">]</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#707f8c">// Ranges that match compareString and searchString</span><span>
</span>
<span>        </span><span class="token token" style="color:#707f8c">// This is always the data for one match</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">var</span><span> patternIndex </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">var</span><span> currentScore </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">var</span><span> currentMatchedPart </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token class-name">NSRange</span><span class="token token" style="color:#000000">(</span><span>location</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#272ad8">0</span><span class="token token" style="color:#000000">,</span><span> length</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#272ad8">0</span><span class="token token" style="color:#000000">)</span><span>
</span>
<span>        </span><span class="token token" style="color:#ad3da4">for</span><span> </span><span class="token token" style="color:#000000">(</span><span>index</span><span class="token token" style="color:#000000">,</span><span> character</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#ad3da4">in</span><span> compareString</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">enumerated</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#ad3da4">if</span><span> </span><span class="token token" style="color:#ad3da4">let</span><span> prefixLength </span><span class="token token" style="color:#000000">=</span><span> searchString</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">hasPrefix</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#ad3da4">prefix</span><span class="token token" style="color:#000000">:</span><span> character</span><span class="token token" style="color:#000000">,</span><span> startingAt</span><span class="token token" style="color:#000000">:</span><span> patternIndex</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>                </span><span class="token token" style="color:#707f8c">// A match was found, so we increment the score and the range</span><span>
</span><span>                patternIndex </span><span class="token token" style="color:#000000">+=</span><span> prefixLength
</span><span>                currentScore </span><span class="token token" style="color:#000000">+=</span><span> </span><span class="token token" style="color:#272ad8">1</span><span>
</span><span>                currentMatchedPart</span><span class="token token" style="color:#000000">.</span><span>length </span><span class="token token" style="color:#000000">+=</span><span> </span><span class="token token" style="color:#272ad8">1</span><span>
</span><span>            </span><span class="token token" style="color:#000000">}</span><span> </span><span class="token token" style="color:#ad3da4">else</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>                </span><span class="token token" style="color:#707f8c">// No match was found</span><span>
</span><span>                currentScore </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span>
</span><span>                </span><span class="token token" style="color:#ad3da4">if</span><span> currentMatchedPart</span><span class="token token" style="color:#000000">.</span><span>length </span><span class="token token" style="color:#000000">!=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>                    matchedParts</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">append</span><span class="token token" style="color:#000000">(</span><span>currentMatchedPart</span><span class="token token" style="color:#000000">)</span><span>
</span><span>                </span><span class="token token" style="color:#000000">}</span><span>
</span><span>                currentMatchedPart </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token class-name">NSRange</span><span class="token token" style="color:#000000">(</span><span>location</span><span class="token token" style="color:#000000">:</span><span> index </span><span class="token token" style="color:#000000">+</span><span> </span><span class="token token" style="color:#272ad8">1</span><span class="token token" style="color:#000000">,</span><span> length</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#272ad8">0</span><span class="token token" style="color:#000000">)</span><span>
</span><span>            </span><span class="token token" style="color:#000000">}</span><span>
</span><span>            totalScore </span><span class="token token" style="color:#000000">+=</span><span> currentScore
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span>
<span>        </span><span class="token token" style="color:#ad3da4">if</span><span> currentMatchedPart </span><span class="token token" style="color:#000000">!=</span><span> </span><span class="token token" style="color:#272ad8">0</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            matchedParts</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">append</span><span class="token token" style="color:#000000">(</span><span>currentMatchedPart</span><span class="token token" style="color:#000000">)</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span>
<span>        </span><span class="token token" style="color:#ad3da4">if</span><span> searchString</span><span class="token token" style="color:#000000">.</span><span>count </span><span class="token token" style="color:#000000">==</span><span> matchedParts</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">reduce</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#272ad8">0</span><span class="token token" style="color:#000000">,</span><span> </span><span class="token token" style="color:#000000">{</span><span> partialResults</span><span class="token token" style="color:#000000">,</span><span> range </span><span class="token token" style="color:#ad3da4">in</span><span> 
</span><span>            range</span><span class="token token" style="color:#000000">.</span><span>length </span><span class="token token" style="color:#000000">+</span><span> partialResult
</span><span>        </span><span class="token token" style="color:#000000">}</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span class="token token" style="color:#000000">(</span><span>weight</span><span class="token token" style="color:#000000">:</span><span> totalScore</span><span class="token token" style="color:#000000">,</span><span> matchedParts</span><span class="token token" style="color:#000000">:</span><span> matchedParts</span><span class="token token" style="color:#000000">)</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span> </span><span class="token token" style="color:#ad3da4">else</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span class="token token" style="color:#000000">(</span><span>weight</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#272ad8">0</span><span class="token token" style="color:#000000">,</span><span> matchedParts</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token" style="color:#000000">]</span><span class="token token" style="color:#000000">)</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>Here is where the magic happens.</p>
<p>First of course we extract the compare string from the provided <code>FuzzySearchString</code>, then we use a lowercased version of the search query.</p>
<p>With the necessary preparations in place, we set up our variables to track the matching process. The <code>totalScore</code> variable holds the cumulative weight of matches found within an object, while the <code>matchedParts</code> variable is an array of ranges representing the specific regions within the object that match the search query.</p>
<p>The next variables are used for each sub-match in the compareString.</p>
<p><code>patternIndex</code>: This is the starting index of the current sub-match. It is incremented each time a matching character is found.</p>
<p><code>currentScore</code>: This is the score for all sub-matches within the compareString. It is incremented each time a sub-match is found.</p>
<p><code>currentMatchedPart</code>: This is a range that represents one sub-match. It stores the starting and ending indices of the sub-match.</p>
<p>We now iterate through the compare string using a <code>for</code> loop with <code>.enumerated()</code> to keep track of the current index. If we find a matching prefix, we can go ahead an increment all values for the current match. The parameters passed to the extension are the characters being compared and the <code>patternIndex</code>. It&#x27;s important to use <code>patternIndex</code> instead of the index of the <code>for</code> loop to avoid double-counting. When a matching prefix is found, we update the <code>patternIndex</code> and shift it to the right, i.e. increase it, preventing the same letters from being matched twice. Additionally, we increment the <code>score</code> and adjust the <code>currentMatchedPart</code> to mark the correct range.</p>
<p>Then we add the <code>currentScore</code> to the <code>totalScore</code>.</p>
<p>However, when the prefixes don&#x27;t align, we reset the <code>currentScore</code> to 0. In the scenario where there was a preceding match, indicated by a non-zero length of <code>currentMatchedPart</code>, we add the matched range to the <code>matchedParts</code>. Subsequently, we reset the <code>currentMatchedParts</code> length to 0, while simultaneously shifting the location to the right.</p>
<p>Upon completion of the <code>for</code> loop, we check again if the last iteration was still a match and if yes, we append the <code>currentmatchPart</code> to the <code>matchedParts</code>.</p>
<p>Finally, we make a comparison between the length of the <code>searchString</code> and the total length of the found ranges. If these lengths match, we return a <code>FuzzySearchMatchResult</code> containing the calculated <code>totalScore</code> and the <code>matchedParts</code>. However, if the lengths differ, we return a weight of 0 along with an empty array</p>
<p>You might be wondering whether you need to manually call this function and provide the <code>FuzzySearchString</code>. Fortunately, that&#x27;s not necessary. We can just create two concise functions that make the process a bit simpler.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">normaliseString</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">FuzzySearchString</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>	</span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token class-name">FuzzySearchString</span><span class="token token" style="color:#000000">(</span><span>characters</span><span class="token token" style="color:#000000">:</span><span> searchableString</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">normalise</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">)</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>This function returns the normalised version of the searchableString that is provided by the object that it is called from.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token class-name">FuzzySearchMatchResult</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">let</span><span> characters </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#703daa">normaliseString</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span>
</span>	
<span>    </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> query</span><span class="token token" style="color:#000000">,</span><span> characters</span><span class="token token" style="color:#000000">:</span><span> characters</span><span class="token token" style="color:#000000">)</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>Subsequently, we simply transform the characters into their normalised counterparts and invoke the fuzzyMatch function. This, in turn, provides us with the <code>FuzzySearchMatchResult</code>.</p>
<h3>Fuzzy Search Extension</h3>
<p>Now, let&#x27;s make arrays fuzzy-searchable by writing an extension for them. This way, they can easily be searched using our fuzzy match functionality.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token class-name">Collection</span><span> </span><span class="token token" style="color:#ad3da4">where</span><span> </span><span class="token token class-name">Iterator</span><span class="token token" style="color:#000000">.</span><span class="token token class-name">Element</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">func</span><span> </span><span class="token token function-definition" style="color:#703daa">fuzzySearch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span class="token token" style="color:#000000">)</span><span> </span><span class="token token" style="color:#000000">-&gt;</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token" style="color:#000000">(</span><span>result</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchmatchResult</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">,</span><span> item</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Iterator</span><span class="token token" style="color:#000000">.</span><span class="token token class-name">Element</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">]</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">return</span><span> map </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token" style="color:#000000">(</span><span>result</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token short-argument">$0</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">fuzzyMatch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> query</span><span class="token token" style="color:#000000">)</span><span class="token token" style="color:#000000">,</span><span> item</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token short-argument">$0</span><span class="token token" style="color:#000000">)</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span class="token token" style="color:#000000">.</span><span>filter </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token short-argument">$0</span><span class="token token" style="color:#000000">.</span><span>result</span><span class="token token" style="color:#000000">.</span><span>weight </span><span class="token token" style="color:#000000">&gt;</span><span> </span><span class="token token" style="color:#272ad8">0</span><span>
</span><span>        </span><span class="token token" style="color:#000000">}</span><span class="token token" style="color:#000000">.</span><span>sorted </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token short-argument">$0</span><span class="token token" style="color:#000000">.</span><span>result</span><span class="token token" style="color:#000000">.</span><span>weight </span><span class="token token" style="color:#000000">&gt;</span><span> </span><span class="token token short-argument">$1</span><span class="token token" style="color:#000000">.</span><span>result</span><span class="token token" style="color:#000000">.</span><span>weight
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>To enable fuzzy searching, we extend Swift&#x27;s <code>Collection</code> with a handy <code>fuzzySearch</code> method. However, to ensure compatibility, we limit this extension to collections whose elements conform to the <code>FuzzySearchable</code> protocol we defined earlier.</p>
<p>When using this method, you simply provide a search <code>query</code>. The function then iterates over the array, invoking the <code>fuzzyMatch</code> method on each element. The <code>fuzzyMatch</code> method, as you recall, provides a weight for every element. We leverage these weights to filter out elements with a score less than or equal to 0. Finally, we sort the array, placing the element with the highest score at the top.</p>
<p><em>Additionally, for a slight performance boost, consider utilising a <code>concurrentMap</code> from the <code>CollectionConcurrencyKit</code> package.</em></p>
<h3>Usage</h3>
<p>In CodeEdit we for one use the algorithm to provide a quick open overlay that lets user find files quickly. To apply fuzzy search to an array of URLs, you can easily extend the data type <code>URL</code> to conform to the <code>FuzzySearchable</code> protocol.</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">extension</span><span> </span><span class="token token" style="color:#703daa">URL</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> searchableString</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">return</span><span> </span><span class="token token" style="color:#ad3da4">self</span><span class="token token" style="color:#000000">.</span><span>lastPathComponent
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>If you&#x27;ve created your custom data type, making it compatible with fuzzy search is a breeze—simply ensure it conforms to the <code>FuzzySearchable</code> protocol, as shown here:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#ad3da4">struct</span><span> </span><span class="token token class-name">Users</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Identifiable</span><span class="token token" style="color:#000000">,</span><span> </span><span class="token token class-name">Codable</span><span class="token token" style="color:#000000">,</span><span> </span><span class="token token class-name">FuzzySearchable</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> id</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">Int</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> name</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">var</span><span> description</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span>
</span> 
<span>    </span><span class="token token" style="color:#ad3da4">var</span><span> searchableString</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>        </span><span class="token token" style="color:#ad3da4">return</span><span> name
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<p>And now we can just use the fuzzy search function:</p>
<pre><div class="codeblock" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.5333em 0.9333em;margin:0.5em 0;overflow:auto;background:#f5f5f7"><code class="language-swift" style="color:#000000;font-family:SF Mono, SFMono-Regular, ui-monospace, Menlo, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.666;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token attribute" style="color:#ad3da4">@State</span><span> </span><span class="token token" style="color:#ad3da4">private</span><span> </span><span class="token token" style="color:#ad3da4">var</span><span> searchText</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token class-name">String</span><span> </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token string-literal" style="color:#b8bb26">&quot;&quot;</span><span>
</span><span></span><span class="token token" style="color:#ad3da4">var</span><span> users</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">Users</span><span class="token token" style="color:#000000">]</span><span> </span><span class="token token" style="color:#000000">=</span><span> </span><span class="token token" style="color:#703daa">getUsers</span><span class="token token" style="color:#000000">(</span><span class="token token" style="color:#000000">)</span><span>
</span><span></span><span class="token token" style="color:#ad3da4">var</span><span> sortedUsers</span><span class="token token" style="color:#000000">:</span><span> </span><span class="token token" style="color:#000000">[</span><span class="token token class-name">Users</span><span class="token token" style="color:#000000">]</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    </span><span class="token token" style="color:#ad3da4">if</span><span> searchText</span><span class="token token" style="color:#000000">.</span><span>isEmpty </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    	</span><span class="token token" style="color:#ad3da4">return</span><span> users
</span><span>    </span><span class="token token" style="color:#000000">}</span><span> </span><span class="token token" style="color:#ad3da4">else</span><span> </span><span class="token token" style="color:#000000">{</span><span>
</span><span>    	</span><span class="token token" style="color:#ad3da4">return</span><span> users</span><span class="token token" style="color:#000000">.</span><span class="token token" style="color:#703daa">fuzzySearch</span><span class="token token" style="color:#000000">(</span><span>query</span><span class="token token" style="color:#000000">:</span><span> searchText</span><span class="token token" style="color:#000000">)</span><span> map </span><span class="token token" style="color:#000000">{</span><span>
</span><span>            </span><span class="token token short-argument">$0</span><span class="token token" style="color:#000000">.</span><span>item
</span><span>        </span><span class="token token" style="color:#000000">}</span><span>
</span><span>    </span><span class="token token" style="color:#000000">}</span><span>
</span><span></span><span class="token token" style="color:#000000">}</span><span>
</span></code></div></pre>
<h2>Conclusion</h2>
<p>Implementing a fuzzy search algorithm is relatively straightforward, yet it significantly enhances the overall user
experience.</p>
<p>If you prefer to grab the entire code at once, you can find it conveniently shared in this <a href="https://gist.github.com/activcoding/548e093cda10ea323775c78ba689e303">gist</a>. I also have a repository with a few implementations of the fuzzy search algorithm. It includes an option for utilizing fuzzy search with cached data, providing a slight performance boost. Check out the <a href="https://github.com/activcoding/FuzzySearch-with-SwiftUI">Demo Repository</a> for a closer look. You can also check out the implementation in <a href="https://github.com/CodeEditApp/CodeEdit">CodeEdit</a>.</p>
<p>If you still have questions, feel free to contact me.</p>
<p>Happy coding!</p></div></div><div class="sc-gWHiUp iUfFkf sharesheet component"><div class="component-content"><div class="sharesheet-content tooltip-wrapper"><ul class="sharesheet-options"><li class="social-option"><button class="icon icon-facebook social-icon" title="Share via Facebook" aria-label="Share this article via Facebook (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .956C5.903.956.96 5.9.96 11.996c0 5.178 3.564 9.523 8.373 10.716V15.37H7.056v-3.374h2.277v-1.453c0-3.758 1.7-5.5 5.39-5.5.7 0 1.906.137 2.4.274v3.059l-.23-.018a19.006 19.006 0 0 0-1.046-.023c-1.81 0-2.51.685-2.51 2.468v1.193h3.607l-.62 3.374h-2.986v7.586c5.466-.66 9.702-5.315 9.702-10.96C23.04 5.9 18.097.956 12 .956"></path></svg></button></li><li class="social-option"><button class="icon icon-twitter social-icon" title="Share via Twitter" aria-label="Share this article via Twitter (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M18.962 1h3.678l-8.077 9.336L24 23h-7.406l-5.798-7.696L4.16 23H.479l8.558-9.985L0 1h7.59l5.238 7.03zm-1.083 20H20L6.279 3H4z"></path></svg></button></li><li class="social-option"><button class="icon icon-mail social-icon" title="Share via mail" aria-label="Share this article via Mail (opens in new window)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></button></li><li class="social-option"><button class="icon icon-link social-icon" title="Share via link" aria-label="Share via link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></button></li></ul><div class="sharesheet-link-container" aria-hidden="true"><div class="sharesheet-link-content"><input class="link-text" tabindex="-1" readonly="" aria-hidden="true" disabled="" value=""/><button class="icon icon-close sharesheet-link-close" title="close" aria-label="close link" tabindex="-1" aria-hidden="true" role="button"></button></div></div></div></div></div><div class="sc-citwID jSpQYJ about-author component"><div class="component-content"><h2 class="about-author-headline">About the Author</h2><div class="author-container"><img alt="Tom Ludwig user image" loading="lazy" width="128" height="128" decoding="async" data-nimg="1" class="author-image" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=128&amp;q=75 1x, /_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=256&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F83090745%3Fv%3D4&amp;w=256&amp;q=75"/><div class="author-info"><p class="author-info-title">Tom Ludwig</p><p class="author-info-text">Berlin</p><p class="author-info-text">Coding in Swift, Dart, Go, Rust, and C++. SwiftUI first, with Flutter when the situation calls for it. </p><div class="author-social"><a class="author-social-link" href="https://activecoding.de.cool" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></a><a class="author-social-link" href="https://github.com/tom-ludwig" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32"><path d="M16 0C7.2 0 0 7.2 0 16c0 7.1 4.6 13.1 10.9 15.2.8.1 1.1-.3 1.1-.8v-2.7c-4.5 1-5.4-2.1-5.4-2.1-.7-1.8-1.8-2.3-1.8-2.3-1.5-1 .1-1 .1-1 1.6.1 2.5 1.6 2.5 1.6 1.4 2.4 3.7 1.7 4.7 1.3.1-1 .6-1.7 1-2.1-3.6-.4-7.3-1.8-7.3-7.9 0-1.7.6-3.2 1.6-4.3-.2-.4-.7-2 .2-4.2 0 0 1.3-.4 4.4 1.6 1.3-.4 2.6-.5 4-.5s2.7.2 4 .5c3.1-2.1 4.4-1.6 4.4-1.6.9 2.2.3 3.8.2 4.2 1 1.1 1.6 2.5 1.6 4.3 0 6.1-3.7 7.5-7.3 7.9.6.5 1.1 1.5 1.1 3v4.4c0 .4.3.9 1.1.8C27.4 29.1 32 23.1 32 16c0-8.8-7.2-16-16-16"></path></svg></a><a class="author-social-link" href="https://x.com/activecoding" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M18.962 1h3.678l-8.077 9.336L24 23h-7.406l-5.798-7.696L4.16 23H.479l8.558-9.985L0 1h7.59l5.238 7.03zm-1.083 20H20L6.279 3H4z"></path></svg></a></div></div></div></div></div></article></div></section></main><footer id="footer" class="sc-kstpWv fOCVA-d footer" role="contentinfo" aria-labelledby="footer-label"><div class="sc-hBEZvw gXpcFj"><section class="sc-jrAGKZ ecOZbo"><div class="sc-dlfmHC rIokE"><div class="sc-hKgKIp ghYAnK"><div class="sc-pGaPU eJLDch"><div style="text-align:center" class="sc-jSguLX hiyZaH"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="sc-crrtmM kUxmqk"><path d="M18.962 1h3.678l-8.077 9.336L24 23h-7.406l-5.798-7.696L4.16 23H.479l8.558-9.985L0 1h7.59l5.238 7.03zm-1.083 20H20L6.279 3H4z"></path></svg><p class="sc-bdfCDU bnxivj">Keep up to date</p><p color="secondary" class="sc-bdfCDU bYhEZu">Stay in the know! Follow us @CodeEditApp on X to get the latest updates.</p><p color="secondary" class="sc-bdfCDU bYhEZu"><a href="https://twitter.com/plyght__">Follow Us</a></p></div></div><div class="sc-pGaPU eJLDch"><div style="text-align:center" class="sc-jSguLX hiyZaH"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 50 50" class="sc-dQpIV hAKmwp"><path d="M41.626 10.768C37.644 7.567 31.347 7.025 31.08 7.003a.999.999 0 0 0-.992.587c-.012.025-.15.34-.303.833 2.633.443 5.867 1.339 8.794 3.155a1 1 0 0 1-1.055 1.7C32.494 10.158 26.209 10 25 10s-7.495.158-12.523 3.278a1 1 0 1 1-1.055-1.699c2.927-1.815 6.16-2.712 8.794-3.155a8.49 8.49 0 0 0-.303-.833.989.989 0 0 0-.993-.587c-.266.021-6.563.563-10.598 3.809C6.213 12.76 2 24.152 2 34c0 .174.045.344.131.495 2.909 5.109 10.842 6.447 12.649 6.504a1.001 1.001 0 0 0 .841-.41l1.829-2.513c-4.933-1.276-7.453-3.439-7.598-3.568a.999.999 0 0 1 1.323-1.5C11.236 33.062 15.875 37 25 37c9.141 0 13.782-3.953 13.828-3.993a1 1 0 0 1 1.321 1.501c-.146.129-2.666 2.292-7.599 3.568l1.829 2.513c.189.259.49.411.809.411l.031-.001c1.809-.057 9.741-1.395 12.649-6.504A.989.989 0 0 0 48 34c0-9.848-4.213-21.24-6.374-23.232M18.5 30c-1.933 0-3.5-1.791-3.5-4s1.567-4 3.5-4 3.5 1.791 3.5 4-1.567 4-3.5 4m13 0c-1.933 0-3.5-1.791-3.5-4s1.567-4 3.5-4 3.5 1.791 3.5 4-1.567 4-3.5 4"></path></svg><p class="sc-bdfCDU bnxivj">Join the conversation</p><p color="secondary" class="sc-bdfCDU bYhEZu">Some of the best ideas come from our community. Join us to influence CodeEdit.</p><p color="secondary" class="sc-bdfCDU bYhEZu"><a href="https://discord.gg/WPwx2xvb">Start a conversation</a></p></div></div><div class="sc-pGaPU eJLDch"><div style="text-align:center" class="sc-jSguLX hiyZaH"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" class="sc-bqyKbq ggvXep"><path d="M16 0C7.2 0 0 7.2 0 16c0 7.1 4.6 13.1 10.9 15.2.8.1 1.1-.3 1.1-.8v-2.7c-4.5 1-5.4-2.1-5.4-2.1-.7-1.8-1.8-2.3-1.8-2.3-1.5-1 .1-1 .1-1 1.6.1 2.5 1.6 2.5 1.6 1.4 2.4 3.7 1.7 4.7 1.3.1-1 .6-1.7 1-2.1-3.6-.4-7.3-1.8-7.3-7.9 0-1.7.6-3.2 1.6-4.3-.2-.4-.7-2 .2-4.2 0 0 1.3-.4 4.4 1.6 1.3-.4 2.6-.5 4-.5s2.7.2 4 .5c3.1-2.1 4.4-1.6 4.4-1.6.9 2.2.3 3.8.2 4.2 1 1.1 1.6 2.5 1.6 4.3 0 6.1-3.7 7.5-7.3 7.9.6.5 1.1 1.5 1.1 3v4.4c0 .4.3.9 1.1.8C27.4 29.1 32 23.1 32 16c0-8.8-7.2-16-16-16"></path></svg><p class="sc-bdfCDU bnxivj">Start Contributing</p><p color="secondary" class="sc-bdfCDU bYhEZu">Help shape the future of CodeEdit. Submit an issue or become a contributor today.</p><p color="secondary" class="sc-bdfCDU bYhEZu"><a href="https://github.com/plyght/voxa">Check it out</a></p></div></div><div class="sc-pGaPU eJLDch"><div style="text-align:center" class="sc-jSguLX hiyZaH"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg><p class="sc-bdfCDU bnxivj">Become a Sponsor</p><p color="secondary" class="sc-bdfCDU bYhEZu">Don&#x27;t have time to contribute? You can show your support by becoming a sponsor.</p><p color="secondary" class="sc-bdfCDU bYhEZu"><a href="https://github.com/sponsors/plyght">Sponsor the Project</a></p></div></div></div></div></section><section class="sc-fodVRF ecpyiT"><div class="sc-fFubCH cBKygQ"><div>To view the latest CodeEdit developments, visit <a>our roadmap</a>.</div><div role="radiogroup" tabindex="0" aria-label="Select a color scheme preference." class="sc-iBPTVF gioWSi"><label data-color-scheme-option="light"><input type="radio" name="colorToggle" autoComplete="off" value="light"/><div class="sc-fubDmA kQHsOt">Light</div></label><label data-color-scheme-option="dark"><input type="radio" name="colorToggle" autoComplete="off" value="dark"/><div class="sc-fubDmA kQHsOt">Dark</div></label><label data-color-scheme-option="auto"><input type="radio" name="colorToggle" autoComplete="off" checked="" value="auto"/><div class="sc-fubDmA kQHsOt">Auto</div></label></div></div><div class="sc-hHftZz fYfJec"><div class="sc-bkzXAi dYLvTZ">Copyright © <!-- -->2025<!-- --> <a href="https://www.peril.lol/voxa">CodeEdit</a>. All rights reserved.</div><div class="sc-idOjMB fknOlR"><a class="sc-dIUfKc flMkga" href="https://github.com/CodeEditApp/CodeEdit/blob/main/LICENSE.md">License</a></div></div></section></div></footer></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontmatter":{"title":"Writing a Generic Fuzzy Search Algorithm in Swift","headline":"Writing a Generic Fuzzy Search Algorithm in Swift","subhead":"Fuzzy searching finds matches even if there are spelling mistakes or slight variations in the search terms. It helps improve search accuracy by understanding what the user is likely looking for.","description":"Fuzzy searching finds matches even if there are spelling mistakes or slight variations in the search terms. It helps improve search accuracy by understanding what the user is likely looking for.","date":"2024-02-17T00:00:00.000Z","category":"insights","author":"tom-ludwig","image":"https://github.com/activcoding/codeedit.app/assets/806104/e4db5b6a-0214-4cc7-8019-8354f37851aa"},"markdownBody":"\n\u003cimg class=\"full-width ratio-21-9\" alt=\"Search Field\" src=\"https://github.com/activcoding/codeedit.app/assets/806104/e4db5b6a-0214-4cc7-8019-8354f37851aa\"\u003e\n\n## What is fuzzy search?\n\nA fuzzy search algorithm is designed to find approximate matches for a given search query, rather than requiring an exact match. It takes into account the similarity between the search query and the data being searched, assigning scores to each potential match based on their resemblance. This allows the algorithm to return relevant results even when there are minor discrepancies or typos in the search input.\n\nLet's say you have a list of products, and a user is looking for a \"Cozy Sweater.\" With a fuzzy search algorithm: If they type \"Czy Swetr,\" the fuzzy search considers the similarity and still returns the \"Cozy Sweater.\"\n\n## Different Algorithms\n\nThere are many algorithms out there providing fuzzy search capabilities, some of which you may have encountered. \nThese include the well-known **Levenshtein Distance**, the **Jaro-Winkler** Distance, **N-Gram** and the **Hamming \nDistance** Algorithm. Additionally, for those in pursuit of speed, two notable options are the **BK Tree** and **Bitmap \nAlgorithm**. It's worth noting that the most efficient and fastest fuzzy search algorithms often include keeping an \nindex of the data, most likely in the form of a trie.\n\nIn our example, we use an algorithm that emphasises matching prefixes and will provide a similarity score. The algorithm is fairly fast and easy to understand.\n\n## Putting search algorithms into practice\n\nLet's start by setting everything up.\n\nGo ahead and create a file called `Models`. As the name implies, this is where we define our data models.\nThe first one represents a search result:\n\n```swift\nstruct FuzzySearchMatchResult {\n    let weight: Int\n    let matchedParts: [NSRange]\n}\n```\n\nThe `weight` is something like a score - the higher, the better.\nAnd the `matchedParts` are the ranges of the string that match the search query. Note that we are using an array of ranges not just one range, because there can be a few characters in between the matched characters. Here is an illustration:  \n\n\u003cfigure\u003e\n  \u003cimg class=\"rounded-corners\" src=\"https://github.com/activcoding/codeedit.app/assets/806104/6e1ee7d3-4c63-4c15-9f45-15cbe0933708\" /\u003e\n  \u003cfigcaption\u003eSearch results: 'conviw' query returns ContentView with the highest relevance.\u003c/figcaption\u003e\n\u003c/figure\u003e\n\nSecondly we need to make sure that the data we searching within is case- and accent-insensitive. This is commonly referred to as 'normalising the string'. To achieve this, we need to add two structs:\n\n```swift\nstruct FuzzySearchCharacter {\n    let content: String\n    let normalisedContent: String\n}\n```\n\nAnd\n\n```swift\nstruct FuzzySearchString {\n    var characters: [FuzzySearchCharacter]\n}\n```\n\nThe first one represents one character, the `content` field holds the original character, while `normalisedContent` steps in as its case- and accent-insensitive counterpart.\n\nAnd the FuzzySearchString represents a whole word, essentially an array of characters. Here is a representation of the frensh word summer: \"été\":\n\n\u003cfigure\u003e\n  \u003cimg class=\"rounded-corners\" src=\"https://github.com/activcoding/codeedit.app/assets/806104/4fecb94f-f2b5-4a83-948a-84f12feddafc\" /\u003e\n  \u003cfigcaption\u003eRepresentation of the word 'été' with normalized characters\u003c/figcaption\u003e\n\u003c/figure\u003e\n\n## Normalise Words\n\nIn order to normalise words, we can create an extension for Strings. Create a new file called: `String+Normalise.swift`. This naming convention enables others to quickly understand the purpose of the file.\n\nWithin the file, you'll need to create an extension for String to use the functionality later.\n\n```swift\nextension String {\n    func normalise() -\u003e [FuzzySearchCharacter] {\n        return self.lowercased().map { char in\n\t    guard let data = String(char).data(using: .ascii, allowLossyConversion: true), let normalisedCharacter = String(data: data, encoding: .ascii) else {\n\t        return FuzzySearchCharacter(content: String(char), normalisedContent: String(char))\n            }\n\n\t    return FuzzySearchCharacter(content: String(char), normalisedContent: normalisedCharacter)\n    \t}\n    }\n}\n```\n\nIn this function, the String it's called on, is first converted to lowercase. Then, it will convert it to data using the ascii encoding and allow lossy conversion, which means that we lose data. Through losing data, we make the String accent-insensitive.\nThe function then returns an array of `FuzzySearchCharacter` objects, representing the original and normalised content for each character.\n\n### Matching Prefix\n\nNow we need to find out if the search query and the string we're comparing it against match. To achieve this, we can write another extension: `hasPrefix`. For better understanding, let's look at the illustration:\n\n\u003cfigure\u003e\n  \u003cimg class=\"rounded-corners\" src=\"https://github.com/activcoding/codeedit.app/assets/806104/f96a4e4f-8821-4989-a744-266cc47b8e8e\" /\u003e\n  \u003cfigcaption\u003eDepicts iterations checking prefixes for a match.\u003c/figcaption\u003e\n\u003c/figure\u003e\n\nThe function simply checks for matching characters from a specified starting index. This functionality will prove useful in later.\n\n```swift\nextension String {\n    func hasPrefix(prefix: FuzzySearchCharacter, startingAt index: Int) -\u003e Int? {\n        guard let stringIndex = self.index(self.startIndex, offsetBy: index, limitedBy: self.endIndex) else {\n            return nil\n        }\n        let searchString = self.sufflix(from: stringIndex)\n        for prefix in [prefix.content, prefix.normalisedContent] where searchString.hasPrefix(prefix) {\n            return prefix.count\n        }\n        return nil\n    }\n}\n```\n\nLet's go through the code step by step:\n\n1. We accept a prefix that is of type `FuzzySearchCharacter`, this is the data against which we test our search \nquery. And we need a starting index.  \n2. Verify if the provided index is valid for the search query.  \n3. Clip the search query (`self`) to start from the provided starting index.  \n4. Iterate through the provided data and check if the prefixes are matching.  \n5. If no match is found, return `nil`.  \n\nIf this function doesn't seem clear at the moment, it will become clearer as we use it.\n\n### Fuzzy Searchable Protocol\n\nIn order to make the Fuzzy Search generic, i.e. make it applicable to every data type, we have to write a protocol.\nOther data types can adopt this protocol, enabling them to become fuzzy searchable.\n\n```swift\nprotocol FuzzySearchable {\n    var searchableString: String { get }\n\n    func fuzzyMatch(query: String, characters: FuzzySearchString) -\u003e FuzzySearchMatchResult\n}\n```\n\nIf a data type wants to conform to `FuzzySearchable`, it only needs to add three simple lines. For instance, consider this Model:\n\n```swift\nstruct Books: FuzzySearchable {\n    var title: String\n    var releaseDate: Date\n\n    var searchableString: String {\n        title\n    }\n}\n```\n\nThis approach enables us to use whatever is provided as the searchable string for comparison against the search query.\nAt this point, you might be wondering why the `fuzzyMatch` function is not implemented in the example `Books` struct.\nHowever, we can address this by writing an extension on `FuzzySearchable` that offers a default `fuzzyMatch` function for all data types that adapt to it. This is relatively straightforward compared to other implementations:\n\n```swift\nextension FuzzySearchable {\n    func fuzzyMatch(query: String, characters: FuzzySearchString) -\u003e FuzzySearchMatchResult {\n        [...]\n    }\n}\n```\n\nThis function takes the query, i.e., the search term, and the characters of a word as arguments. The characters represent the string that we compare the search query against. We use `FuzzySearchString` instead of a simple String, because we want a case- and accent-insensitive search.\n\nThe function then returns a `FuzzySearchMatchResult`, which just holds information about the search result, to be precise it includes `let weight: Int` and `let matchedParts: [NSRange]`.\n\nNow let's implement the function:\n\n```swift\nextension FuzzySearchable {\n    func fuzzyMatch(query: String, characters: FuzzySearchString) -\u003e FuzzySearchMatchResult {\n        let compareString = characters.characters // the string we compare against\n        let searchString = query.lowercased() // make the query case-insensitive\n\n        var totalScore = 0 // represents the weight of the match\n        var matchedParts = [NSRange]() // Ranges that match compareString and searchString\n\n        // This is always the data for one match\n        var patternIndex = 0\n        var currentScore = 0\n        var currentMatchedPart = NSRange(location: 0, length: 0)\n\n        for (index, character) in compareString.enumerated() {\n            if let prefixLength = searchString.hasPrefix(prefix: character, startingAt: patternIndex) {\n                // A match was found, so we increment the score and the range\n                patternIndex += prefixLength\n                currentScore += 1\n                currentMatchedPart.length += 1\n            } else {\n                // No match was found\n                currentScore = 0\n                if currentMatchedPart.length != 0 {\n                    matchedParts.append(currentMatchedPart)\n                }\n                currentMatchedPart = NSRange(location: index + 1, length: 0)\n            }\n            totalScore += currentScore\n        }\n\n        if currentMatchedPart != 0 {\n            matchedParts.append(currentMatchedPart)\n        }\n\n        if searchString.count == matchedParts.reduce(0, { partialResults, range in \n            range.length + partialResult\n        }) {\n            return FuzzySearchMatchResult(weight: totalScore, matchedParts: matchedParts)\n        } else {\n            return FuzzySearchMatchResult(weight: 0, matchedParts: [])\n        }\n    }\n}\n```\n\nHere is where the magic happens.\n\nFirst of course we extract the compare string from the provided `FuzzySearchString`, then we use a lowercased version of the search query.\n\nWith the necessary preparations in place, we set up our variables to track the matching process. The `totalScore` variable holds the cumulative weight of matches found within an object, while the `matchedParts` variable is an array of ranges representing the specific regions within the object that match the search query.\n\nThe next variables are used for each sub-match in the compareString.\n\n`patternIndex`: This is the starting index of the current sub-match. It is incremented each time a matching character is found.\n\n`currentScore`: This is the score for all sub-matches within the compareString. It is incremented each time a sub-match is found.\n\n`currentMatchedPart`: This is a range that represents one sub-match. It stores the starting and ending indices of the sub-match.\n\nWe now iterate through the compare string using a `for` loop with `.enumerated()` to keep track of the current index. If we find a matching prefix, we can go ahead an increment all values for the current match. The parameters passed to the extension are the characters being compared and the `patternIndex`. It's important to use `patternIndex` instead of the index of the `for` loop to avoid double-counting. When a matching prefix is found, we update the `patternIndex` and shift it to the right, i.e. increase it, preventing the same letters from being matched twice. Additionally, we increment the `score` and adjust the `currentMatchedPart` to mark the correct range.\n\nThen we add the `currentScore` to the `totalScore`.\n\nHowever, when the prefixes don't align, we reset the `currentScore` to 0. In the scenario where there was a preceding match, indicated by a non-zero length of `currentMatchedPart`, we add the matched range to the `matchedParts`. Subsequently, we reset the `currentMatchedParts` length to 0, while simultaneously shifting the location to the right.\n\nUpon completion of the `for` loop, we check again if the last iteration was still a match and if yes, we append the `currentmatchPart` to the `matchedParts`.\n\nFinally, we make a comparison between the length of the `searchString` and the total length of the found ranges. If these lengths match, we return a `FuzzySearchMatchResult` containing the calculated `totalScore` and the `matchedParts`. However, if the lengths differ, we return a weight of 0 along with an empty array\n\nYou might be wondering whether you need to manually call this function and provide the `FuzzySearchString`. Fortunately, that's not necessary. We can just create two concise functions that make the process a bit simpler.\n\n```swift\nfunc normaliseString() -\u003e FuzzySearchString {\n\treturn FuzzySearchString(characters: searchableString.normalise())\n}\n```\n\nThis function returns the normalised version of the searchableString that is provided by the object that it is called from.\n\n```swift\nfunc fuzzyMatch(query: String) -\u003e FuzzySearchMatchResult {\n    let characters = normaliseString()\n\t\n    return fuzzyMatch(query: query, characters: characters)\n}\n```\n\nSubsequently, we simply transform the characters into their normalised counterparts and invoke the fuzzyMatch function. This, in turn, provides us with the `FuzzySearchMatchResult`.\n\n### Fuzzy Search Extension\n\nNow, let's make arrays fuzzy-searchable by writing an extension for them. This way, they can easily be searched using our fuzzy match functionality.\n\n```swift\nextension Collection where Iterator.Element: FuzzySearchable {\n    func fuzzySearch(query: String) -\u003e [(result: FuzzySearchmatchResult), item: Iterator.Element)] {\n        return map {\n            (result: $0.fuzzyMatch(query: query), item: $0)\n        }.filter {\n            $0.result.weight \u003e 0\n        }.sorted {\n            $0.result.weight \u003e $1.result.weight\n        }\n    }\n}\n```\n\nTo enable fuzzy searching, we extend Swift's `Collection` with a handy `fuzzySearch` method. However, to ensure compatibility, we limit this extension to collections whose elements conform to the `FuzzySearchable` protocol we defined earlier.\n\nWhen using this method, you simply provide a search `query`. The function then iterates over the array, invoking the `fuzzyMatch` method on each element. The `fuzzyMatch` method, as you recall, provides a weight for every element. We leverage these weights to filter out elements with a score less than or equal to 0. Finally, we sort the array, placing the element with the highest score at the top.\n\n*Additionally, for a slight performance boost, consider utilising a `concurrentMap` from the `CollectionConcurrencyKit` package.*\n\n### Usage\n\nIn CodeEdit we for one use the algorithm to provide a quick open overlay that lets user find files quickly. To apply fuzzy search to an array of URLs, you can easily extend the data type `URL` to conform to the `FuzzySearchable` protocol.\n\n```swift\nextension URL: FuzzySearchable {\n    var searchableString: String {\n        return self.lastPathComponent\n    }\n}\n```\n\nIf you've created your custom data type, making it compatible with fuzzy search is a breeze—simply ensure it conforms to the `FuzzySearchable` protocol, as shown here:\n\n```swift\nstruct Users: Identifiable, Codable, FuzzySearchable {\n    var id: Int\n    var name: String\n    var description: String\n \n    var searchableString: String {\n        return name\n    }\n}\n```\n\nAnd now we can just use the fuzzy search function:\n\n```swift\n@State private var searchText: String = \"\"\nvar users: [Users] = getUsers()\nvar sortedUsers: [Users] {\n    if searchText.isEmpty {\n    \treturn users\n    } else {\n    \treturn users.fuzzySearch(query: searchText) map {\n            $0.item\n        }\n    }\n}\n```\n\n## Conclusion\n\nImplementing a fuzzy search algorithm is relatively straightforward, yet it significantly enhances the overall user \nexperience.\n\nIf you prefer to grab the entire code at once, you can find it conveniently shared in this [gist](https://gist.github.com/activcoding/548e093cda10ea323775c78ba689e303). I also have a repository with a few implementations of the fuzzy search algorithm. It includes an option for utilizing fuzzy search with cached data, providing a slight performance boost. Check out the [Demo Repository](https://github.com/activcoding/FuzzySearch-with-SwiftUI) for a closer look. You can also check out the implementation in [CodeEdit](https://github.com/CodeEditApp/CodeEdit).\n\nIf you still have questions, feel free to contact me.  \n\nHappy coding!  \n","author":{"login":"tom-ludwig","id":83090745,"node_id":"MDQ6VXNlcjgzMDkwNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/83090745?v=4","gravatar_id":"","url":"https://api.github.com/users/tom-ludwig","html_url":"https://github.com/tom-ludwig","followers_url":"https://api.github.com/users/tom-ludwig/followers","following_url":"https://api.github.com/users/tom-ludwig/following{/other_user}","gists_url":"https://api.github.com/users/tom-ludwig/gists{/gist_id}","starred_url":"https://api.github.com/users/tom-ludwig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tom-ludwig/subscriptions","organizations_url":"https://api.github.com/users/tom-ludwig/orgs","repos_url":"https://api.github.com/users/tom-ludwig/repos","events_url":"https://api.github.com/users/tom-ludwig/events{/privacy}","received_events_url":"https://api.github.com/users/tom-ludwig/received_events","type":"User","user_view_type":"public","site_admin":false,"name":"Tom Ludwig","company":"@SAP","blog":"https://activecoding.de.cool","location":"Berlin","email":null,"hireable":null,"bio":"Coding in Swift, Dart, Go, Rust, and C++. SwiftUI first, with Flutter when the situation calls for it. ","twitter_username":"activecoding","public_repos":49,"public_gists":4,"followers":22,"following":9,"created_at":"2021-04-23T18:36:14Z","updated_at":"2024-12-17T09:46:34Z"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2024","02","generic-fuzzy-search-algorithm"]},"buildId":"Xf4DupNDsftRDxAe6Cf7U","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>